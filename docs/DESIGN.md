# ShakeFizz デザイン仕様書

若者向けの**エネルギッシュで没入感のある**モバイルアプリデザインです。

---

## 1. 飲み物選択画面（Drink Selection）

**コンセプト**: ワクワク感を演出するスタート画面。暗い背景 × ネオンカラー（シアン・マゼンタ・イエロー）で、若者向けのエネルギッシュでモダンな雰囲気。

### ヘッダー（画面上部）

| 要素 | 仕様 |
|------|------|
| 左上 | 白い左向き矢印の円形「戻る」ボタン |
| 中央 | ネオンシアン色のテキストで **「SHAKE FIZZ」** |
| 右上 | 白い疑問符の円形「ヘルプ」ボタン |

### メインタイトル・説明

- **「SELECT YOUR」**（白・細字）の下に **「ULTIMATE FIZZ」**（ネオンシアン・太字）
- 説明文（白・細字）: *「Choose your weapon. Higher carbonation means more height, but less stability.」*  
  （武器を選べ。炭酸が多いほど高さは出るが、安定性は低い。）— 戦略性を匂わせる文言

### 飲み物選択グリッド（中央・2×2）

各カードは角丸・暗い背景で少し浮き出たカード形式。

| カード | 内容 | 特記事項 |
|--------|------|----------|
| **ULTRA COLA** | 赤いコカ・コーラ缶（水滴付き） | ネオンシアン枠、右上にマゼンタ「READY!」タグ。FIZZ 85%（シアンのプログレスバー） |
| **LIME BURST** | 緑の缶 | SPEED 92%（黄色プログレスバー） |
| **BEAST FUEL** | 黒い細身缶（青い渦巻きロゴ） | POWER 98%（マゼンタプログレスバー） |
| **GINGER SHOCK** | グレースケール・ぼかし | 南京錠アイコン + 「RANK S」でロック表示（アンロック要素） |

### ライブ飲料統計（LIVE BEVERAGE STATS）

- タイトル右にネオンシアンで「REAL-TIME」+ グラフアイコン
- 3つの統計を横並びで表示:
  - **MAX ALTITUDE**: 数値（例: 142m）、下に「+12% vs. Avg」
  - **FIZZ DURATION**: 数値（例: 12.4s）、下にマゼンタ「EXTREME」
  - **BURST F**: 値（例: X-9）、下に黄色「UNSTAB」（不安定）

### プライマリCTA

- **「START SHAKING」** ボタン: 画面幅いっぱい・角丸・ネオンシアン・白文字、右に稲妻アイコン

### フッターナビゲーション

- 4アイコン均等配置: ゲームコントローラー（選択中ハイライト）／グラフ（ランキング）／ショップ／プロフィール

### トーン・カラー

- 背景: 暗色（ほぼ黒）
- アクセント: ネオンシアン、マゼンタ、イエロー
- テキスト: 白（タイトル・ラベル）、ネオンで強調

---

## 2. 安全警告画面（Safety Warning）

**コンセプト**: プレイ前の重要なステップ。スマホをしっかり持つよう促す**視認性の高い**警告画面。工事現場の立ち入り禁止を思わせる黄×黒ストライプとネオンカラーで、若者向けのモダンでサイバーパンク感のある警告を演出。

### 背景・全体

- 背景: 暗色（ほぼ黒に近いダークグレー）
- 上部・下部: **黄色と黒の斜めストライプ**の警告バー（画面幅いっぱい）で視覚的に区切り

### ヘッダー

| 要素 | 仕様 |
|------|------|
| 左上 | 丸枠内に感嘆符の**黄色い警告アイコン** |
| 右隣 | **「SAFETY FIRST!」**（大文字・太字・黄色） |
| 下 | 黄×黒の斜めストライプの細いライン（安全バー風） |

### メイン警告エリア（中央カード）

- **カード**: 角丸・ダークグレー・わずかに光る縁
- **上部中央**: 大きな**黄色の三角形の警告アイコン**（感嘆符入り）
- **メッセージ**
  - 「**HOLD TIGHT WITH**」（白・太字）
  - 「**BOTH HANDS!**」（黄・太字・さらに大きく）— 両手で持つことを強調
- **補足文**（グレー・細字）: *「Extreme shaking ahead. Do not drop or throw your device!」*  
  （激しい揺れが予想されます。デバイスを落としたり、投げたりしないでください！）
- **持ち方イラスト**
  - 横長の長方形内: 中央にスマホアイコン（左右に振動波）、その両脇に手のひら（手の甲）アイコン
  - スマホ＋楕円枠は**明るいシアン**で縁取り（ネオン効果）
  - 手は薄いグレー
- **追加ラベル**: 黄・太字で **「DANGER: HIGH VELOCITY」**

### フッター

- 黄×黒ストライプのライン（ヘッダーと同様）
- **「GOT IT!」** ボタン: 鮮やかなシアン・角丸・白い太字 — 警告を理解したことを確認するCTA
- **最下部**: 薄いグレーの小さな免責事項  
  *「ShakeFizz is not responsible for any device damage, cracked screens, or flying phones during gameplay. Play at your own risk.」* など

### トーン・カラー

- ダークグレー/黒（背景・カード）、黄（警告アイコン・強調テキスト・ストライプ）、白（本文）、明るいシアン（イラスト縁・ボタン）
- フォント: 太字サンセリフで視認性とエネルギッシュな印象
- **スキップ不可**（1回は表示必須）。進むには「GOT IT!」タップのみ

---

## 3. プレイ画面（Play Screen）

**コンセプト**: 缶の内部を覗き込んでいるような**没入感のある**画面。暗い背景 × ネオングリーン・シアン・マゼンタのアクセントで、モダンでダイナミックな体験を演出。背景にはぼかされた光の玉のようなエフェクトで「缶の中」感を表現。

### 上部UI

| 要素 | 仕様 |
|------|------|
| 左上 | **「×」ボタン** — プレイ終了 or 前の画面へ戻る |
| 中央上部 | **「FLAVOR NEON LIME」** — 現在選択中の飲み物フレーバー表示 |
| 右上 | **グラフアイコンボタン** — ランキング or セッション統計へ |

### メイン表示エリア（中央）

- **タイトル**: 「PROJECTED SPRAY」（予測噴射高さ）
- **メイン数値**: **21.4m** など、大きく表示（現在のシェイク状態から予測される噴射高さ・メートル）
- **ベスト表示**: 数値の右隣にマゼンタの小さな「BEST」— 最高記録 or ベストに近い状態を示す
- **タグ（楕円形・2つ並び）**
  - 左: マゼンタ丸アイコン ＋ **「HIGH PRESSURE」** — 缶の内圧が高まっている状態
  - 右: **「RANK: #12」** — 現在のランキング
- **高さメーター（右端）**
  - 縦長のグラデーションメーター（下→上: シアン → 青 → 紫 → マゼンタ）
  - 現在の噴射高さレベルを視覚化
  - メーター上に「BEST」を示す短い横線（目標・範囲の目安）

### 下部UI

- **促し**: 小さな振動スマホアイコン ＋ **「KEEP SHAKING!」** — シェイクし続けるよう促す
- **プライマリCTA**: **「POP THE TOP」** — シアン・角丸・大きく目立つボタン。シェイクを終えて缶を開ける（噴射させる）アクション
- **左下**: **「SESSION DURATION」** ＋ **「00:14.22」** — プレイセッションの経過時間

### トーン・インタラクション

- 暗い背景、ネオングリーン・シアン・マゼンタの鮮やかなアクセント
- （実装時）液体の揺れ（sloshing）をリアルタイム表示し、スマホの傾き・振りに連動
- Accelerometer で振りを検知 → 予測噴射高さをリアルタイム更新
- ユーザーは最適なタイミングで「POP THE TOP」を押して噴射 → 結果画面へ

---

## 4. 結果画面（Result Screen）

**コンセプト**: 達成した最高噴射高さとランクを大きく表示し、**SNSでシェアしやすい**レイアウト。ダークテーマ × 光るティール・ピンクのアクセントで、達成感とエネルギッシュな印象を演出。

### トップバー

| 要素 | 仕様 |
|------|------|
| 左上 | ダークグレーの円形ボタン ＋ **白い「×」** — 結果を閉じる or 戻る |
| 中央上部 | **「MISSION COMPLETE」**（薄いティール）、その下に **「SHAKEN!」**（大・太字・白）— クリア完了のメッセージ |
| 右上 | ダークグレーの円形ボタン ＋ **白い棒グラフアイコン** — ランキング or 統計へ |

### メイン結果表示（中央）

- **ランクバッジ**: 角丸の長方形、**光るピンク/紫の枠**、白文字で **「RANK S」**（S〜C の高評価表示）
- **スコア**: **18.7** を大きく光るティール〜白の数字で表示、**m** は小さくティールで単位表示
- **新記録バッジ**: スコアの直下、ティール枠 ＋ 緑の星アイコン ＋ **「NEW PERSONAL RECORD」**（白）
- **前回ベスト**: その下に小さくグレーで *「Best: 17.5m last Tuesday」* など

### パフォーマンス統計（横並び・2枚のカード）

| カード | アイコン | ラベル | 値 |
|--------|----------|--------|-----|
| 左 | ティールの稲妻 | **TOP SPEED**（グレー） | **42 km/h**（大・白） |
| 右 | ティールの水滴 | **TOTAL SHAKES**（グレー） | **86**（大・白） |

- 各カードは角丸の長方形

### シェア（SHARE YOUR SPRAY）

- **見出し**: 「SHARE YOUR SPRAY」（グレー・中央）
- **シェアボタン**: 3つの円形・ダークグレー、白いアイコン
  - X（Twitter/X）用
  - Instagram 用
  - アップロード/共有（上向き矢印）用

### 下部ナビゲーション・アクション

- **ページインジケーター**: 横並びの3点、中央がティールで点灯（必要に応じて複数結果に対応）
- **プライマリCTA**: **「TRY AGAIN」** — 大きく角丸、光るティール背景・黒文字、左に更新/やり直しアイコン
- **セカンダリCTA**: **「CHANGE DRINK」** — 角丸・ダークグレー、白文字、ボトル＋カクテルグラスのアイコン（飲み物選択へ）
- 最下部: iOS ホームインジケーター（細いグレー線）

### トーン・カラー

- 背景: 暗色（ダークテーマ）
- アクセント: 光るティール、ピンク/紫（ランクバッジ枠）、白・グレーで情報を階層化
- 達成感・派手さをネオン風の光で表現。スクショしやすい＝余白と情報のバランスを意識

---

## 5. グローバルランキング画面（Global Ranking）

**コンセプト**: 他のユーザーと噴射高さを競い合う**リーダーボード**画面。暗い背景 × 鮮やかなティール（teal）のアクセントで、エネルギッシュでモダンな印象。トップ3を大きく、その下にリスト、最下部に自分の順位バナーで階層を明確に。

### ヘッダー

| 要素 | 仕様 |
|------|------|
| 左上 | 黒い円形ボタン ＋ **白い左向き矢印** — 戻る |
| 中央 | **「GLOBAL ELITE」**（白・太字・大文字サンセリフ）、「ELITE」の下にティールの短いアンダーライン |
| 右上 | 黒い円形ボタン ＋ **白いトロフィーアイコン** — 報酬 or シーズン履歴へ |

### グローバル / フレンド切り替え

- **セグメントコントロール**（中央・横並び）
  - **「GLOBAL」**: 選択時 — ティールの角丸ピル背景、白・太字・大文字
  - **「FRIENDS」**: 未選択 — 暗い角丸ピル上に白・太字・大文字

### シーズン終了カウントダウン

- **「SEASON ENDS IN」**（薄いティール）
- その下に **3つの円形アウトライン**（暗いティール枠）内に白い数字: **12**（HRS）／**45**（MIN）／**30**（SEC）
- 単位（HRS, MIN, SEC）は薄いティールで各円の下に表示

### トップ3表示（中央・大きく）

| 順位 | 配置・デザイン | 表示内容 |
|------|----------------|----------|
| **#1** | 中央・最も大きく、**太いティールの光る枠**、アバター上に**金色の星アイコン** | #1、ユーザー名（例: KingShaker）、スコア（例: 542.1m・ティール・太字） |
| **#2** | #1の左、やや小さい円形アバター、標準の暗い枠 | #2、ユーザー名（例: FizzMaster）、スコア（例: 510.8m・ティール） |
| **#3** | #1の右、やや小さい円形アバター、**オレンジ色の枠** | #3、ユーザー名（例: BubblePop）、スコア（例: 495.2m・ティール） |

- 各アバター下: 順位（白）→ ユーザー名（白・太字）→ スコア（ティール・太字・単位 m）

### ランキングリスト（4位以降・スクロール）

- **カード**: 横長・角丸・ダークグレーのピル/カード
- **各エントリ**: 左から
  - **順位**（白・数字）
  - **アバター**（小さい円形）
  - **ユーザー名**（白・太字）
  - **タイトル/ティア**（ユーザー名の下、色付き: 例「PRO SHAKER」「EXPERT」「ELITE」＝ティール、「RISING STAR」＝ピンク/マゼンタ）
  - **スコア**（右端、白・太字、例: 442.9m）、その下に小さく薄いグレーで「RECORD」

### 自分の順位バナー（最下部・固定）

- **バナー**: 幅広・角丸・**ティールで塗りつぶし**、目立つ配置
- **左**: 円形アバター（薄い茶系）、左上に **「YOU」** バッジ（白文字・ピンク/マゼンタ背景）
- **中央**: **ユーザー名**（白・太字・大文字、例: SODASLINGER）、その下に「Top 5% Globally」（白・小さい）
- **右側**: **ベストスコア**（白・太字、例: 385.4m）、その下に「YOUR BEST」（白・小さい）
- **最右**: **順位**（白・太字、例: #128）、その下に「RANK」（白・小さい）

### トーン・カラー

- 背景: 暗色（ほぼ黒）
- アクセント: 鮮やかなティール、白、オレンジ・ピンク/マゼンタ・薄い茶（アバター）を補助的に使用
- フォント: サンセリフ、太字でユーザー名・スコアを強調、タイトル・ラベルは大文字
- アイコン: 戻る矢印、トロフィー、星（1位用）
- 階層: トップ3 → リスト → 自分のバナーで視線を誘導

---

## 6. グループ対戦モード（Group Battle）

**コンセプト**: 人数を入力してルームを作り、同じグループ内でそれぞれゲームを行い、終了後に**グループ内の順位**を出すモード。友達同士で集まっての対戦に最適。

### フロー概要

1. **ルーム作成 or 参加** — 人数を入力（例: 2〜8人）してルーム作成、またはルームコード/QRで参加
2. **待機** — 参加者が揃うまで待機画面（例: 「3 / 5 人が参加」）
3. **各自プレイ** — 全員揃ったらスタート。各人が自分の端末で「飲み物選択 → 安全警告 → プレイ → 結果」を実施し、スコアがルームに送信される
4. **グループ結果** — 全員のプレイが終わったら、そのグループ内の順位（1位〜）を一覧表示

### 想定画面・UI要素

| ステップ | 画面 | 主な要素 |
|----------|------|----------|
| 入り口 | モード選択 or ホーム | **「GROUP BATTLE」** ボタン／アイコン（複数人アイコン） |
| ルーム作成 | 人数入力・ルーム作成 | **参加人数**の入力（スライダー or 数値 2〜8）、**「CREATE ROOM」**。作成後は **ルームコード（4〜6桁）** または **QRコード** を表示して他者に共有 |
| 参加 | ルーム参加 | コード入力欄 ＋ **「JOIN」**、または QR スキャン |
| 待機 | 待機ルーム | **「Waiting for players...」**、**3 / 5 joined** のような進捗。参加者一覧（ニックネーム or プレイヤー1, 2...）。ホストのみ **「START」** ボタン（全員揃ったら有効） |
| プレイ中 | 既存のプレイ画面 | 通常の「飲み物選択 → 安全警告 → プレイ → 結果」を各人が実施。結果画面で **「スコアをルームに送信」** で確定。**「待機中: あと2人」** のような表示も検討 |
| グループ結果 | グループ内ランキング | **「GROUP RESULTS」** タイトル。1位〜最下位まで、**順位・ニックネーム（or プレイヤー名）・スコア（m）** をリスト表示。1位はゴールド/ティールでハイライト。**「もう一度対戦」「ルームに戻る」** などのCTA |

### トーン・デザイン

- 既存のダーク × ネオン（ティール・シアン・マゼンタ）を踏襲
- 「グループ」「ルーム」感を出すため、複数人アイコン・ルームコード・待機中のアニメーションなどを活用
- グループ結果画面はグローバルランキングのリスト形式に近いが、**同一ルーム内の少人数**に特化した見やすさを優先

### 技術メモ（実装時）

- ルーム管理・参加者同期: Firebase Realtime Database / Firestore または簡易 WebSocket サーバー
- ルームコードは重複しにくいランダム文字列。有効期限（例: 10分）を設けるとよい
- 全員のスコアが揃ったタイミングで「グループ結果」画面へ遷移（プッシュ or ポーリング）

---

## デザイン原則（まとめ）

| キーワード     | 反映例                                   |
|----------------|------------------------------------------|
| エネルギッシュ | カラフルな缶、派手なランク表示、動きのあるUI |
| 没入感         | 缶内部ビュー、液体の揺れ、暗めのプレイ画面   |
| 若者向け       | ポップな色、SNSシェア、ランキング競争       |
| 安全           | 視認性の高い警告画面（スキップ不可）         |

---

## 画面遷移イメージ

**通常モード**

```
[飲み物選択] → [安全警告] → [プレイ] → [結果]
      ↑              ↑           ↑         ↓
      └──────────────┴───────────┴── [ランキング]
```

**グループ対戦モード**

```
[モード選択] → [ルーム作成 or 参加] → [待機ルーム] → [START]
                                                          ↓
[グループ結果] ← … ← [結果] ← [プレイ] ← [安全警告] ← [飲み物選択]
     ↑                    （各プレイヤーが順に or 並行でプレイ）
     └── もう一度対戦 / ルームに戻る
```

---

## 企画・実装のための追加情報

### ターゲット層・ペルソナ

| 項目 | 詳細 |
|------|------|
| **メインターゲット** | 18〜28歳、男女比 6:4。カジュアルゲーム・SNS好き、友達との競争・シェアに積極的 |
| **ペルソナ例1** | 大学生（20歳・男性）、友人とのパーティーや待ち時間に盛り上がる遊びを探している。TikTok・X でバズる体験に敏感。ランキング上位を目指すモチベーション |
| **ペルソナ例2** | 社会人（25歳・女性）、通勤中や休憩時間にサクッと遊べるアプリが好き。可愛い・クールなデザインに惹かれる。Instagram でスコアをシェアして「いいね」を集めたい |
| **サブターゲット** | 10代後半（高校生）、30代前半の「ゲーム好き」層 |

### 収益化戦略

| 手法 | 内容 | 実装優先度 |
|------|------|------------|
| **広告** | リワード動画広告（「再プレイ +1回」「缶アンロック」など）、インタースティシャル（結果画面後、頻度制限あり） | ⭐⭐⭐ 高（初期） |
| **アプリ内課金（IAP）** | プレミアム缶パック（¥370〜）、広告除去（¥610）、限定ランクバッジ（¥250） | ⭐⭐ 中（v1.1〜） |
| **サブスクリプション** | 「Fizz Pass」月額¥370 — 広告なし、限定缶・エフェクト先行アクセス、グループ対戦ルーム無制限 | ⭐ 低（後期） |
| **スポンサーシップ** | 飲料メーカーとのコラボ缶（ブランドロゴ入り）、期間限定イベント | 💡 将来構想 |

**マネタイズ KPI**: ARPU（1ユーザー平均収益）¥80+/月、課金率 3〜5%、広告 eCPM ¥600+

### ユーザーオンボーディング（初回起動）

| ステップ | 画面 | 目的 |
|----------|------|------|
| 1. スプラッシュ | ShakeFizz ロゴ＋ネオンアニメーション | ブランド印象・読み込み |
| 2. ウェルカム | 「SHAKE. POP. COMPETE.」などのキャッチコピー + 缶のビジュアル。**「GET STARTED」** | 期待感を醸成 |
| 3. チュートリアル（任意スキップ） | 3画面スワイプ: ①「選ぶ」（缶選択）、②「振る」（アニメGIF）、③「競う」（ランキング）。**「SKIP」** / **「NEXT」** | 遊び方を視覚的に理解 |
| 4. 初回プレイ | 簡易版プレイ（安全警告は表示、スコアは保存しない）で体験 | 実際に触って理解 |
| 5. ニックネーム設定 | オプション：ニックネーム入力（後で変更可）。スキップ → 匿名ID自動生成 | ランキング・SNSシェア用 |

**スキップ可能**: チュートリアルは「SKIP」ボタンで飛ばせる。初回プレイはスキップ不可（体験必須）。

### 音響・ハプティクス設計

| 要素 | 音・振動 | タイミング |
|------|----------|------------|
| **UI音** | タップ音（シュッ）、ページ遷移（ウィン） | ボタンタップ、画面切り替え |
| **カウントダウン** | 「3」「2」「1」（ビープ音）→「GO!」（高音+重低音） | プレイ開始前 |
| **シェイク検知** | シュワシュワ音（液体・炭酸音）、強さに応じて音量・ピッチ変化 | プレイ中、振り続けている間 |
| **内圧上昇** | プシュー音（圧力）、HIGH PRESSURE 時は連続音 | 一定の振り強度を超えたとき |
| **噴射（POP THE TOP）** | 爆発音 + シューッ（噴き出し）、ハプティクス: 強い振動（0.5秒） | 「POP THE TOP」タップ時 |
| **結果表示** | ランクに応じた音: S=ファンファーレ、A=拍手、B/C=短い効果音 | 結果画面表示時 |
| **NEW RECORD** | キラキラ音 + 短い振動 | 自己ベスト更新時 |
| **BGM** | オプション: ループ可能なネオン感のある EDM 風（プレイ中のみ、設定でON/OFF） | プレイ画面 |

**設定**: 音量・ハプティクス強度は設定画面で調整可能（OFF含む）。

### KPI・アナリティクス

| カテゴリ | 指標 | 目標（初期3ヶ月） |
|----------|------|-------------------|
| **ユーザー獲得** | DAU（1日あたりアクティブユーザー） | 5,000+ |
|  | MAU（月間） | 30,000+ |
|  | 新規インストール数 | 1,000+/週 |
| **エンゲージメント** | セッション/日 | 平均 3.5回 |
|  | セッション時間 | 平均 4分 |
|  | リテンション（D1/D7/D30） | 40% / 20% / 10% |
| **収益** | ARPU | ¥80/月 |
|  | 課金率 | 3〜5% |
|  | 広告インプレッション/DAU | 3〜5回 |
| **ソーシャル** | シェア率 | 15%（結果画面で「SHARE」タップ） |
|  | グループ対戦セッション | 全体の 10% |
| **パフォーマンス** | クラッシュ率 | < 1% |
|  | 平均読み込み時間 | < 2秒（起動〜プレイ可能） |

**計測ツール**: Firebase Analytics、Mixpanel（ファネル分析）、AppsFlyer（広告効果測定）

### 技術アーキテクチャ（概要）

**クライアント: Swift（ネイティブ iOS）**

```
[iOS アプリ: Swift ネイティブ]
   ├─ SwiftUI または UIKit（UI構築）
   ├─ Core Motion（CMMotionManager：加速度・振り検知）
   ├─ Combine / async-await（非同期・データバインディング）
   ├─ AVFoundation（効果音・BGM）
   └─ Firebase iOS SDK（Auth, Firestore, Realtime DB, Analytics）
   ↕ HTTPS / WebSocket
[バックエンド: Firebase]
   ├─ Firestore / Realtime Database（ルーム・ランキング・ユーザーデータ）
   ├─ Cloud Functions（ランキング集計、ルーム管理）
   ├─ Firebase Authentication（匿名 or Sign in with Apple）
   └─ Cloud Storage（プロフィール画像、将来のカスタム缶画像）
```

**採用理由（ネイティブ Swift）**:
- 加速度センサー・ハプティクス・音声を OS に最適化して利用可能
- 液体アニメーション・パーティクルを Metal / Core Animation で 60 FPS 安定
- App Store 審査・配信フローにそのまま乗れる
- **Android 版**は将来 **Kotlin（ネイティブ）** で別プロジェクトとして検討可能

**データモデル**: エンティティ（User, Session, Room, RoomScore, LeaderboardEntry, Season, Drink, UserSettings）、Enum（DrinkType, Rank, RoomStatus, UserTier）、Firestore コレクション・インデックス・リレーションは **`data-design.json`**（同 `docs/` 内）に一括定義。開発時はこの JSON を参照してモデル・API を実装する。

**API設計**:

- `POST /rooms/create` — ルーム作成、roomId 返却
- `POST /rooms/join` — ルームコードで参加
- `POST /sessions/submit` — スコア送信（個人 or ルーム内）
- `GET /leaderboard/global?season=X` — グローバルランキング取得
- `GET /rooms/:roomId/results` — グループ内順位取得

### シーズン制ランキングの理由と効果

ランキングを**シーズン（期間）で区切る**理由と、このアプリにもたらす効果をまとめる。

**理由（なぜシーズンで区切るか）**

| 理由 | 説明 |
|------|------|
| **公平性・新規参入のしやすさ** | 常に「全期間の累計」だけだと、昔からプレイしているユーザーが上位を占め続ける。シーズンごとにリセットすることで、**新規ユーザーも「今シーズンなら1位を狙える」**と感じやすく、参入障壁が下がる。 |
| **再プレイの動機づけ** | 「先月は10位だった。今月こそトップ3に入りたい」のように、**毎シーズン「やり直し」ができる**ため、離脱したユーザーが戻ってきたり、週末だけプレイする層が「今シーズンだけは頑張る」と継続しやすくなる。 |
| **終了日による緊急性（FOMO）** | UI の「SEASON ENDS IN 12 HRS 45 MIN 30 SEC」のように**締め切りを明示**すると、「今のうちにスコアを伸ばさないと」という心理が働き、シーズン終盤のプレイ頻度・エンゲージメントが上がる。 |
| **運用・技術のしやすさ** | ランキングが「全期間で1本」だとデータが肥大化し、集計・表示が重くなる。シーズンごとに区切ることで**集計対象を限定**でき、クエリやキャッシュの設計がしやすく、古いデータのアーカイブやリセットも行いやすい。 |
| **イベント・マーケとの連携** | 「1月シーズン」「冬の Fizz 祭」のように**シーズン＝イベント**として扱える。限定缶・報酬・広告と紐づけやすく、SNS やプッシュで「新シーズン開始」を告知する材料になる。 |

**このアプリにもたらす効果**

| 効果 | 内容 |
|------|------|
| **リテンションの向上** | 月替わり（または四半期）シーズンにより、「また来月頑張ろう」と**定期的に戻ってくる理由**ができる。KPI の D7/D30 リテンション改善が期待できる。 |
| **新規獲得との両立** | 既存プレイヤーだけでなく、**新規インストールしたユーザーも「今シーズンから」同じ土俵で競える**ため、獲得施策（広告・インフルエンサー）の効果が「ランキング上位を狙える」という訴求で伝わりやすい。 |
| **収益機会** | シーズン限定の缶パック・バッジ・「シーズンパス」などの**課金・広告と紐づけ**やすい。「今シーズン TOP 10 に特典」といったキャンペーンも設計しやすい。 |
| **コミュニティ・話題** | 「今シーズン誰が1位か」「先月の自分 vs 今月の自分」など**会話のネタ**が生まれ、X・Discord での盛り上がりや口コミにつながる。 |
| **バランス変更との相性** | 将来、缶のパラメータ（FIZZ/SPEED/POWER）やランク基準を変更しても、**「新シーズンから新ルール」**と伝えやすく、不満を抑えつつゲーム性を進化させやすい。 |

**まとめ**: シーズン制は「公平性」「再プレイの動機」「締め切りによる緊急性」「運用のしやすさ」「イベント化」を満たし、**リテンション・新規獲得・収益・コミュニティ**に効く設計である。ShakeFizz では月単位（例: 2025-01）を想定し、グローバルランキング画面の「SEASON ENDS IN」表示と連動させる。

---

**ウィークリーランキングとウィークリー1位バッジ（採用案）**

期間を**ウィークリー（週単位）**で区切り、**今週1位だったユーザーにバッジを付与**する案を採用する。

| 内容 | 説明 |
|------|------|
| **ウィークリーランキング** | 今週（月曜 0:00〜日曜 23:59 など、UTC または日本時間で週を定義）に記録された Session だけを対象に、「今週のランキング」を表示する。毎週リセットされるので、**「今週こそ1位」**を狙う動機が毎週生まれる。 |
| **ウィークリー1位バッジ** | ある週のグローバル1位だったユーザーに **「Weekly #1」** などのバッジを付与し、プロフィール・ランキング表示・SNSシェア時に表示する。**獲得実績として残る**ので、ウィークリー1位の価値が高まり、週の終盤のプレイ数が伸びやすい。 |
| **シーズンとの併用** | ウィークリー（今週のランキング・Weekly #1 バッジ）と、月単位シーズン（今月のランキング・「SEASON ENDS IN」）を**両方**用意する。ウィークリー＝短いサイクルで週のうちに開く理由、シーズン＝月末の締め切りとイベント化、という役割分担ができる。 |

**効果**: ウィークリー区切り＋バッジにより、**週のうちにアプリを開く理由**と**シェアしたくなる実績**が増え、リテンション・SNS拡散の両方に効く。

---

**ランキングを「Session から期間で算出」するか、「別データで保持」するか**

「期間（ウィークリー／シーズン）で区切るなら、**Season エンティティや LeaderboardEntry を保持せず、Session をその期間で絞り込んでランキングを算出する**のでは？」という設計も成立する。両方のやり方と、**ランキング用データを保持する理由**を整理する。

**方式A: Session のみ保持し、ランキングは都度算出**

- **やり方**: Season や LeaderboardEntry は持たない。ランキング表示時に「対象期間の Session を取得（例: `timestamp >= 今月1日 AND timestamp < 来月1日`）→ ユーザーごとに最大スコアを集計 → ソートして上位 N 件表示」とする。
- **メリット**: データの重複がない。**集計ロジックが一箇所**で、Session が正しければランキングは常に正しい。ウィークリー・月間など**期間の種類を増やしても、同じ Session に対して別の時間範囲を指定するだけ**で済む。
- **デメリット**: 
  - **読むドキュメント数が膨大になる**: Firestore は「ドキュメント読み取り」で課金される。例えば「今月のランキング TOP 100」を出すために、今月の Session が 10 万件あると、**10 万回読む**ことになり、コスト・レスポンス時間が増大する。
  - **集計が重い**: クライアントや Cloud Functions で「全 Session を読んでグループ化・ソート」する処理が重く、表示が遅くなる。
- **向いている規模**: **ユーザー数・プレイ数が少ないうち（例: ベータ期、日次セッション数が数百〜数千程度）**は、Session を期間で絞ってランキング算出するだけで運用可能。まずは **Session のみでランキングを実装し、負荷が増えてから事前集計に移行**する選択もあり。

**方式B: ランキング用のデータを別途保持（事前集計）**

- **やり方**: 定期的に（例: 毎週月曜 0:05、毎月1日 0:05）Cloud Functions などで「対象期間の Session を集計し、**ウィークリー TOP N / シーズン TOP N を `weekly_leaderboard` や `leaderboard_entries` に書き出す**」。表示時はその**少数ドキュメントだけを読む**。
- **メリット**: 
  - **読み取りコスト・レスポンスが小さい**: ランキング画面を開くたびに「TOP 100 の 100 件」だけ読めばよい。Session を何万件も読まない。
  - **「締め切り」との整合**: ウィークリー 1 位やシーズン終了時点の順位を**確定した値**として保持できる。バッジ付与（「その週の 1 位」）も、確定済みのランキングテーブルを参照すればよい。
- **デメリット**: 集計ジョブの実装・運用が必要。集計の遅延（例: 5 分遅れ）を許容するか、リアルタイムに近づけるかは設計次第。

**Season エンティティを「持つ／持たない」**

- **持たない場合**: 「今シーズン＝今月」「今シーズン終了＝月末 23:59」などを**アプリ側のルール（コード）で固定**する。`SEASON ENDS IN` は「月末までの残り時間」をクライアントで計算すればよい。**Season ドキュメントは必須ではない**。
- **持つ場合**: シーズン期間を DB で管理したいとき（例: イベントで「今週だけ 2 週間シーズン」にする）は、`Season` エンティティで `startsAt` / `endsAt` を保持し、`SEASON ENDS IN` や「どのシーズンのランキングか」の判定に使う。**運用で期間を変えたいとき**に有利。

**結論（ShakeFizz での推奨）**

| フェーズ | 推奨 |
|----------|------|
| **初期・小規模** | **Session のみ保持**。ウィークリー／シーズンとも「その期間の Session を取得 → ユーザーごと最大スコアで集計 → ランキング表示」。Season エンティティは持たず、期間はコードで「今週」「今月」と定義。ウィークリー 1 位バッジは「その週のランキング 1 位」を表示時に算出するか、週次バッチで 1 位の uid を User のバッジとして 1 件だけ書き込む軽い集計でもよい。 |
| **規模が大きくなったら** | ランキング表示の読み取りコスト・遅延を抑えるため、**ウィークリー TOP N・シーズン TOP N を事前集計して保持**（例: `weekly_leaderboard/{weekId}`, `leaderboard_entries`）。ウィークリー 1 位バッジも、この確定ランキングを元に付与する。Season は「期間を運用で変えたいとき」だけ導入する。 |

**まとめ**: 「期間で区切る」ために **Season や LeaderboardEntry を必ず持つ必要はない**。**Session を期間で絞ってランキングを算出する設計でよい**。ランキング用データを別途保持するのは、**読み取りコスト・レスポンス・確定順位・バッジ付与**を楽にするためであり、**スケールに応じて「まず Session のみ → 負荷が増えたら事前集計」と段階的に選べる**。

### 多言語対応（ローカライゼーション）

| 言語 | 対応優先度 | 備考 |
|------|------------|------|
| 日本語 | ⭐⭐⭐ | プライマリ |
| 英語 | ⭐⭐⭐ | グローバル展開必須 |
| 中国語（簡体字） | ⭐⭐ | アジア圏拡大時 |
| 韓国語 | ⭐⭐ | アジア圏拡大時 |
| その他（スペイン語・フランス語など） | ⭐ | 需要に応じて |

**実装**: Swift 標準の **Localizable.strings**（`ja.lproj`, `en.lproj`）と **NSLocalizedString** / **String(localized:)** で UI 文言・通知を管理。SwiftUI の場合は `Text("key", tableName: "Localizable")` または `LocalizedStringKey` を利用。

### 法務・安全・規約

| 項目 | 内容 |
|------|------|
| **免責事項** | 「激しい振動でデバイスが破損・落下する可能性があります。自己責任でプレイしてください」— 安全警告画面 + 利用規約に明記 |
| **年齢制限** | App Store / Google Play: **12+**（軽度な競争要素あり） |
| **プライバシーポリシー** | 収集データ: デバイスID（匿名）、プレイ履歴、位置情報（任意）。Firebase Analytics・広告 SDK の利用を明記 |
| **利用規約** | 禁止事項: 不正スコア送信、ルーム荒らし、他者への迷惑行為。違反時はアカウント停止 |
| **著作権・商標** | 「ShakeFizz」の商標登録を検討。コラボ缶は各ブランドとライセンス契約 |

### パフォーマンス目標

| 指標 | 目標値 |
|------|--------|
| 起動時間 | 冷起動 < 2.5秒（スプラッシュ→飲み物選択） |
| FPS（プレイ画面） | 60 FPS 維持（液体アニメーション・パーティクル動作中） |
| バッテリー消費 | 10分プレイで < 3%（平均的なスマホ） |
| アプリサイズ | 初回 DL < 80 MB、OTA更新 < 20 MB |
| メモリ使用量 | < 200 MB（iOS） |
| ネットワーク | スコア送信・ランキング取得は各 < 500ms。オフラインでも単体プレイ可能（スコア送信は再接続時） |

### Go-to-Market（マーケティング・ローンチ戦略）

| フェーズ | 施策 | 目標 |
|----------|------|------|
| **ベータ版（1〜2ヶ月前）** | **TestFlight** で iOS ベータ配信、友人・インフルエンサー 50人にテスト依頼。フィードバック収集（Android 版は将来 Kotlin で検討） | バグ修正、UI改善、初期レビュー 10件+ |
| **事前登録（2週間前）** | 公式 X アカウント開設、ティザー動画（10秒）投稿、事前登録キャンペーン（100名にプレミアム缶コード） | フォロワー 500+、事前登録 1,000+ |
| **正式ローンチ（初日）** | **App Store** リリース。X・Instagram・TikTok で #ShakeFizz ハッシュタグキャンペーン。プレスリリース配信（Google Play は Android 版開発時に検討） | 初日 DL 500+、SNS投稿 50+ |
| **初週〜1ヶ月** | インフルエンサーマーケティング（ゲーム実況者・TikToker 5〜10名）、広告（Meta・TikTok・X、予算 ¥50,000/週）、ランキングイベント（初月 TOP 10 に Amazon ギフト券） | 週間 DL 2,000+、MAU 10,000+ |
| **継続運用** | 隔週アップデート（新缶・イベント）、シーズン制ランキング（月替わり）、ユーザーコミュニティ（Discord / X スペース）で盛り上げ | 月次成長率 +20%、リテンション改善 |

**差別化ポイント（ピッチ用）**:

- 「スマホを振る」という**身体的な没入感**（他のタップゲームにない体験）
- **SNSシェア前提**のUI（ランク・スコアをワンタップでシェア）
- **ネオン×ダーク**の若者向けモダンデザイン
- **グループ対戦**で友達とリアルタイムに盛り上がる

---

*このドキュメントは、実装・UIデザイン・プロトタイプの基準として利用してください。*
